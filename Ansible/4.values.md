![](https://github.com/jcorvid509/.resGen/blob/main/_bannerD.png#gh-dark-mode-only)
![](https://github.com/jcorvid509/.resGen/blob/main/_bannerL.png#gh-light-mode-only)

<a href="/README.md"><img src="https://github.com/jcorvid509/.resGen/blob/main/_home.svg" width="30"></a>

<a href="3.despliegue.md"><img src="https://github.com/jcorvid509/.resGen/blob/main/_arrow_r.svg" width="30"></a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
<a href="4.values.md"><img src="https://github.com/jcorvid509/.resGen/blob/main/_arrow.svg" width="30"></a>

---

# Registrar valores

Usando ansible, podemos almacenar valores en una variable para su posterior uso en el playbook.

## Crear nuevo rol

Para ello, hemos de modificar el archivo principal `mai.yml` a√±adiendo un nuevo rol:

```bash
nano main.yml
```

```yml
- hosts: webservers
  remote_user: "root"
  roles:
  - role: nginx_install
  - role: register_variable # nuevo rol
```

Para poder usar el nuevo rol, hemos de crearlo dentro del fichero `roles`

```bash
mkdir roles/register_variable/tasks
```

Dentro de la carpeta `tasks` hemos de crear un archivo llamado `main.yml` con el siguiente contenido:

```bash
nano roles/register_variable/tasks/main.yml
```
```yml
---
# registrar variable

- name: check if file exists
  stat:
    path: "/root/ansible/file"  # cargamos el fichero
  register: file_exists         # registramos la variable file_exists
```